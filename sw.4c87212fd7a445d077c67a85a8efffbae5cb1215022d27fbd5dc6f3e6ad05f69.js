(()=>{var h=null,i=["https://fastly.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js","https://fastly.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js","https://fastly.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js","https://fastly.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css","https://fastly.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css","/favicon.ico","/offline/"],a="v1";self.addEventListener("install",e=>{self.skipWaiting(),e.waitUntil(o())});self.addEventListener("fetch",e=>{e.respondWith(c(e.request))});self.addEventListener("activate",e=>{e.waitUntil(Promise.all([self.clients.claim(),l()]))});async function o(){return(await caches.open(a)).addAll(i).catch(t=>{console.warn("\u9884\u7F13\u5B58\u65F6\u5F02\u5E38"),console.log(t)})}async function c(e){let t=await caches.open(a),s=await t.match(e);if(s)return e.destination==="document"&&fetch(e).then(n=>t.put(e,n)).catch(n=>{console.warn("\u66F4\u65B0\u6587\u6863\u7F13\u5B58\u65F6\u5F02\u5E38"),console.log(n)}),s;try{s=await fetch(e)}catch(n){if(e.destination==="document")return console.warn("\u8BF7\u6C42\u6587\u6863\u65F6\u5F02\u5E38\uFF0C\u663E\u793A\u79BB\u7EBF\u9875\u9762"),console.log(n),t.match("/offline/");throw n}return e.url.startsWith("chrome-extension://")||t.put(e,s.clone()).catch(n=>{console.warn("\u7F13\u5B58\u8BF7\u6C42\u65F6\u5F02\u5E38"),console.log(n)}),s}async function l(){let e=await caches.keys();await Promise.all(e.map(t=>{if(t!==a)return caches.delete(t)}))}})();
